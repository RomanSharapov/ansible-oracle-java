FROM centos:6

ENV JAVA_MAJOR 8
ENV JAVA_MINOR 121
ENV JAVA "1.$JAVA_MAJOR.0_$JAVA_MINOR"

RUN yum -y update \
    && rpm -ivh http://dl.fedoraproject.org/pub/epel/6/x86_64/epel-release-6-8.noarch.rpm \
    && yum install -y python-pip gcc libffi-devel python-devel openssl-devel git \
    && pip install --upgrade pip

WORKDIR /tmp

ENV PATH /tmp/ansible/bin:/bin:/usr/bin:/sbin:/usr/sbin
ENV PYTHONPATH /tmp/ansible/lib
ENV ANSIBLE_LIBRARY /tmp/ansible/library

COPY ./test-playbook.sh test-playbook.sh

RUN chmod +x test-playbook.sh \
    && ./test-playbook.sh